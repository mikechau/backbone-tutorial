<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>BackboneTutorials.com Beginner Video</title>
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.1.1/css/bootstrap.min.css">
</head>
<body>

  <!-- HTML -->
  <div id="search_container"></div>


  <!-- TEMPLATES -->

  <script type="text/template" id="search_template">
    <form class="form-horizontal">
      <label><%= search_label %></label>
      <input type="text" id="search_input" placeholder="<%= search_placeholder %>" />
      <input type="button" class="btn btn-primary" id="search_button" value="Search" />
    </form>
  </script>

  <!-- EXTERNAL SCRIPTS -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.2/underscore-min.js" type="text/javascript"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js"></script>

  <!-- JS -->
  <script type="text/javascript">

    // MODELS

    Person = Backbone.Model.extend({
      defaults: {
        name: 'Doe',
        age: 0,
        child: ''
      },
      initialize: function(){
        console.log("Person Model initialized.");
      }
    });

    // VIEWS
    SearchView = Backbone.View.extend({
      initialize: function(){
        this.render();
      },
      render: function(){
        // Pass variables in using Underscore.js Template
        var variables = { 
                          search_label: "My Search",
                          search_placeholder: "Search Here"
                        };

        // Compile the template using underscore
        var template = _.template( $("#search_template").html(), variables );

        // Load the compiled HTML into the Backbone "el"
        this.$el.html( template );
      }, 
      events: {
        "click input[type=button]": "doSearch"
      },
      doSearch: function( event ){
        // Button clicked, you can access the element that was clicked with event.currentTarget
          alert( "Search for " + $("#search_input").val() );
      }
    });

    // Create Instances
    var person = new Person({ name: "Jack", age: 21 }); // model
    var search_view = new SearchView({ el: $("#search_container") }); // view

    // Debugging
    function getPersonAttributes(person) {
      console.log("=============================");
      console.log( "Name: " + person.get("name") );
      console.log( "Age: " + person.get("age") );
      console.log( "Child: " + person.get("child") );
    }
    getPersonAttributes(person);
    person.set({ name: "Ryo", age: 22, child: 'Kyo' });
    getPersonAttributes(person);
  </script>


</body>
</html> 